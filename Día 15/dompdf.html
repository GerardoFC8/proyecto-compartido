<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía Completa: Generar PDF con DomPDF en Laravel 12</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-color: #4f46e5;
            --secondary-color: #f8f9fa;
            --sidebar-width: 280px;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--secondary-color);
        }
        #sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: #fff;
            padding: 20px;
            border-right: 1px solid #dee2e6;
            transition: all 0.3s;
            z-index: 1000;
            overflow-y: auto;
        }
        #main-content {
            margin-left: var(--sidebar-width);
            padding: 40px;
            transition: all 0.3s;
        }
        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .sidebar-header h3 {
            color: var(--primary-color);
            font-weight: 700;
        }
        .sidebar-nav .nav-link {
            color: #555;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 5px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .sidebar-nav .nav-link.active,
        .sidebar-nav .nav-link:hover {
            background-color: #eef2ff;
            color: var(--primary-color);
        }
        .sidebar-nav .nav-link .fa-fw {
            margin-right: 10px;
        }
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        .content-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }
        .code-block {
            background-color: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            overflow-x: auto;
            position: relative;
        }
        .code-block .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4f46e5;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .code-block:hover .copy-btn {
            opacity: 1;
        }
        .alert-info {
            background-color: #eef2ff;
            border-left: 5px solid var(--primary-color);
            color: #333;
        }
        @media (max-width: 768px) {
            #sidebar {
                transform: translateX(-100%);
            }
            #main-content {
                margin-left: 0;
            }
            body.sidebar-toggled #sidebar {
                transform: translateX(0);
            }
             #sidebar-toggler {
                display: block !important;
                position: fixed;
                top: 15px;
                left: 15px;
                z-index: 1001;
            }
        }
    </style>
</head>
<body>
    <button id="sidebar-toggler" class="btn btn-primary d-md-none"><i class="fas fa-bars"></i></button>

    <div id="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-file-pdf"></i> DomPDF en Laravel</h3>
            <p class="text-muted">Guía Interactiva</p>
        </div>
        <ul class="nav flex-column sidebar-nav">
            <li class="nav-item">
                <a class="nav-link active" href="#" data-target="intro"><i class="fas fa-fw fa-rocket"></i> Introducción</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="install"><i class="fas fa-fw fa-download"></i> Instalación y Configuración</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="routes"><i class="fas fa-fw fa-route"></i> Creando la Ruta</a>
            </li>
             <li class="nav-item">
                <a class="nav-link" href="#" data-target="model"><i class="fas fa-fw fa-database"></i> Ajustes al Modelo Post</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="controller"><i class="fas fa-fw fa-cogs"></i> Modificando el Controlador</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="controller-functions"><i class="fas fa-fw fa-bolt"></i> Funciones del Controlador</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="pdf-view"><i class="fas fa-fw fa-palette"></i> Creando la Vista para el PDF</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="index-view"><i class="fas fa-fw fa-list-alt"></i> Modificando la Vista Principal</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-target="conclusion"><i class="fas fa-fw fa-check-circle"></i> Conclusión</a>
            </li>
        </ul>
    </div>

    <div id="main-content">
        <!-- Introduction Section -->
        <div id="intro" class="content-section active">
            <div class="card">
                <div class="card-body p-5">
                    <h1 class="card-title text-primary">Guía para Generar PDFs con DomPDF en Laravel 12</h1>
                    <p class="lead">En este ejemplo, crearemos un reporte en PDF que listará todos los posts de tu blog, mostrando información del post, su categoría y el autor.</p>
                    <p>Esta guía es interactiva. Utiliza el menú de la izquierda para navegar entre las diferentes secciones. Cada sección te explicará un paso crucial del proceso, desde la instalación del paquete hasta la creación de las vistas y la lógica en el controlador.</p>
                    <div class="alert alert-info mt-4">
                        <h5 class="alert-heading"><i class="fas fa-info-circle"></i> Archivos que modificaremos y crearemos:</h5>
                        <ul>
                            <li><strong>config/dompdf.php:</strong> (Opcional) Para ajustes avanzados.</li>
                            <li><strong>routes/web.php:</strong> Para añadir la nueva ruta del PDF.</li>
                            <li><strong>app/Models/Post.php:</strong> Para asegurar la relación con el usuario.</li>
                            <li><strong>app/Http/Controllers/PostController.php:</strong> Para añadir la lógica de generación del PDF.</li>
                            <li><strong>resources/views/post/index.blade.php:</strong> Para añadir el botón de descarga.</li>
                            <li><strong>resources/views/post/posts-pdf.blade.php:</strong> (Nuevo) La plantilla que usará el PDF.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Installation Section -->
        <div id="install" class="content-section">
            <div class="card">
                <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Paso 1: Instalación y Configuración</h2>
                    <p>El primer paso es instalar el paquete <code>barryvdh/laravel-dompdf</code>, que es un wrapper muy popular y fácil de usar de DomPDF para Laravel.</p>
                    
                    <h4 class="mt-4">Instalación vía Composer</h4>
                    <p>Abre tu terminal en la raíz de tu proyecto Laravel y ejecuta el siguiente comando:</p>
                    <div class="code-block">
                        <pre><code>composer require barryvdh/laravel-dompdf</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>

                    <h4 class="mt-4">Publicar la Configuración (Opcional pero recomendado)</h4>
                    <p>Este paquete funciona bastante bien sin configuración adicional. Sin embargo, si necesitas ajustar opciones avanzadas, puedes publicar el archivo de configuración con este comando:</p>
                    <div class="code-block">
                        <pre><code>php artisan vendor:publish --provider="Barryvdh\DomPDF\ServiceProvider"</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                    <p class="mt-2">Esto creará un archivo <code>config/dompdf.php</code> que podrás modificar.</p>
                    <div class="alert alert-success mt-4">
                        <i class="fas fa-check"></i> ¡Listo! Con esto, DomPDF ya está instalado y listo para ser utilizado en tu aplicación.
                    </div>
                </div>
            </div>
        </div>

        <!-- Routes Section -->
        <div id="routes" class="content-section">
            <div class="card">
                 <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Paso 2: Creando la Ruta</h2>
                    <p>Necesitamos una ruta específica que, al ser visitada, genere y devuelva el PDF. Vamos a añadir esta ruta en nuestro archivo de rutas web.</p>

                    <h4 class="mt-4">Añadir la ruta en <code>routes/web.php</code></h4>
                    <p>Abre el archivo <code>routes/web.php</code> y agrega la siguiente línea. Es una buena práctica agrupar las rutas relacionadas, así que puedes ponerla cerca de tus otras rutas de posts.</p>
                     <div class="code-block">
<pre><code>
use App\Http\Controllers\PostController;

// ... otras rutas

Route::get('/posts/reporte/pdf', [PostController::class, 'generatePDF'])->name('posts.pdf');

// Agrupa las rutas de posts si estás usando un resource controller
Route::resource('posts', PostController::class)->middleware(['auth']);
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                    <div class="alert alert-info mt-4">
                        <h5 class="alert-heading"><i class="fas fa-lightbulb"></i> ¿Qué hace esta ruta?</h5>
                        <ul>
                            <li>Define la URL <code>/posts/reporte/pdf</code> para acceder al reporte.</li>
                            <li>Apunta al método <code>generatePDF</code> que crearemos en el <code>PostController</code>.</li>
                            <li>Le asignamos un nombre (<code>posts.pdf</code>) para poder llamarla fácilmente desde nuestras vistas.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Section -->
        <div id="model" class="content-section">
            <div class="card">
                 <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Paso 3: Ajustes al Modelo Post</h2>
                    <p>Para poder mostrar el nombre del autor de cada post en el PDF, necesitamos asegurarnos de que el modelo <code>Post</code> tenga una relación definida con el modelo <code>User</code>. Si ya la tienes, puedes omitir este paso.</p>

                    <h4 class="mt-4">Añadir la relación en <code>app/Models/Post.php</code></h4>
                    <p>Abre el archivo <code>app/Models/Post.php</code> y añade la siguiente función. Esto asume que tienes una columna <code>user_id</code> en tu tabla <code>posts</code> que referencia al autor.</p>
                     <div class="code-block">
<pre><code>
&lt;?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\SoftDeletes;

class Post extends Model
{
    // ... tu código existente ...

    public function category(): BelongsTo
    {
        return $this->belongsTo(Category::class);
    }
    
    /**
     * Define la relación con el usuario (autor del post).
     */
    public function user(): BelongsTo
    {
        return $this->belongsTo(User::class);
    }
}
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                     <div class="alert alert-warning mt-4">
                        <strong>Importante:</strong> Si no tienes un campo `user_id` en tu tabla `posts`, deberás agregarlo mediante una migración para que esta relación funcione.
                    </div>
                </div>
            </div>
        </div>

        <!-- Controller Section -->
        <div id="controller" class="content-section">
            <div class="card">
                <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Paso 4: Modificando el Controlador</h2>
                    <p>Ahora, vamos a crear el método <code>generatePDF</code> en el <code>PostController</code>. Este método se encargará de obtener los datos, cargar una vista y generar el PDF.</p>
                    
                    <h4 class="mt-4">Añadir el método en <code>app/Http/Controllers/PostController.php</code></h4>
                    <p>Abre el controlador y añade lo siguiente:</p>
                    <div class="code-block">
<pre><code>
&lt;?php

namespace App\Http\Controllers;

// ... otros use

use App\Models\Post;
use Barryvdh\DomPDF\Facade\Pdf; // Importante: Importa la clase PDF

class PostController extends Controller
{
    // ... tus otros métodos (index, create, store, etc.)

    /**
     * Genera un reporte en PDF con todos los posts.
     */
    public function generatePDF()
    {
        // Obtenemos todos los posts con sus relaciones de categoría y usuario
        // Eager loading para optimizar consultas
        $posts = Post::with(['category', 'user'])->get();

        $data = [
            'title' => 'Reporte General de Posts',
            'date' => date('d/m/Y H:i:s'),
            'posts' => $posts
        ];

        // Carga la vista 'posts-pdf' y le pasa los datos
        $pdf = Pdf::loadView('post.posts-pdf', $data);

        // Opcional: Configurar tamaño y orientación del papel
        $pdf->setPaper('A4', 'landscape');

        // Descargar el PDF con un nombre de archivo específico
        // return $pdf->download('reporte-posts.pdf');
        
        // O si quieres mostrarlo en el navegador sin descargarlo directamente:
        return $pdf->stream('reporte-posts.pdf');
    }

    // ... resto de tu controlador
}
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                     <div class="alert alert-info mt-4">
                        <h5 class="alert-heading"><i class="fas fa-lightbulb"></i> Puntos Clave:</h5>
                        <ul>
                            <li><strong>`use Barryvdh\DomPDF\Facade\Pdf;`</strong>: No olvides importar el Facade de DomPDF.</li>
                            <li><strong>`Post::with(['category', 'user'])->get()`</strong>: Usamos "eager loading" para cargar las relaciones `category` y `user` en una sola consulta, lo cual es mucho más eficiente.</li>
                            <li><strong>`Pdf::loadView(...)`</strong>: Este es el método principal. Carga una vista de Blade como si fuera una página normal.</li>
                            <li><strong>`stream()` vs `download()`</strong>: `stream()` muestra el PDF en el navegador, mientras que `download()` fuerza la descarga del archivo. Veremos más opciones en la siguiente sección.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controller Functions Section (NEW) -->
        <div id="controller-functions" class="content-section">
            <div class="card">
                <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Funciones Adicionales del Controlador</h2>
                    <p>El facade <code>Pdf</code> te da acceso a múltiples métodos para personalizar la generación de tu documento. Aquí están los más comunes que puedes usar en tu método <code>generatePDF</code>.</p>

                    <h4 class="mt-4">1. Cargar Contenido</h4>
                    <p>Además de <code>loadView()</code>, puedes cargar HTML directamente desde una cadena de texto.</p>
                    <div class="code-block">
<pre><code>// Cargar HTML desde una variable
$html = '&lt;h1&gt;Hola Mundo&lt;/h1&gt;';
$pdf = Pdf::loadHTML($html);
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>

                    <h4 class="mt-4">2. Configurar Papel y Orientación</h4>
                    <p>Puedes definir el tamaño del papel y su orientación. DomPDF soporta la mayoría de los tamaños estándar.</p>
                    <div class="code-block">
<pre><code>// Formato A4 en orientación horizontal (landscape)
$pdf->setPaper('a4', 'landscape');

// Formato Carta (letter) en orientación vertical (portrait)
$pdf->setPaper('letter', 'portrait');

// Tamaño personalizado (en puntos: 1pt = 1/72 de pulgada)
$customPaper = array(0,0,595.28,841.89); // Equivalente a A4
$pdf->setPaper($customPaper);
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                     <div class="alert alert-info mt-3">
                        <strong>Tamaños comunes:</strong> <code>letter</code>, <code>legal</code>, <code>a4</code>, <code>a5</code>, <code>tabloid</code>, <code>executive</code>.
                    </div>

                    <h4 class="mt-4">3. Generar la Salida del PDF</h4>
                    <p>Tienes diferentes maneras de entregar el PDF al usuario o de manejarlo internamente.</p>
                    <div class="code-block">
<pre><code>// 1. Mostrar en el navegador (visualizar)
// El PDF se abre en una pestaña sin forzar la descarga.
return $pdf->stream('nombre-archivo.pdf');

// 2. Forzar la descarga
// El navegador iniciará la descarga del archivo inmediatamente.
return $pdf->download('nombre-archivo-a-descargar.pdf');

// 3. Obtener el contenido del PDF como una cadena de texto
// Útil para guardarlo en el servidor, enviarlo por email, etc.
$output = $pdf->output();
Storage::put('reportes/mi-reporte.pdf', $output);
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>

                     <h4 class="mt-4">4. Proteger el PDF con Contraseña</h4>
                    <p>Puedes añadir una capa de seguridad estableciendo una contraseña para abrir el documento.</p>
                    <div class="code-block">
<pre><code>$pdf = Pdf::loadView('post.posts-pdf', $data);

// Establece la contraseña (usuario, propietario, permisos)
$pdf->getDomPDF()->getCanvas()->get_cpdf()->setEncryption('mi_clave_de_usuario');

return $pdf->stream();
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                     <div class="alert alert-warning mt-3">
                        <strong>Nota:</strong> La protección con contraseña es una funcionalidad avanzada. La contraseña de "usuario" es la que se necesita para abrir el archivo. Puedes establecer una segunda contraseña de "propietario" para restringir permisos como impresión o copiado.
                    </div>
                </div>
            </div>
        </div>

        <!-- PDF View Section -->
        <div id="pdf-view" class="content-section">
            <div class="card">
                <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Paso 5: Creando la Vista para el PDF</h2>
                    <p>Esta es la plantilla HTML que DomPDF convertirá a PDF. Es importante mantener el CSS simple, preferiblemente en línea o en una etiqueta <code>&lt;style&gt;</code>, ya que DomPDF tiene limitaciones con CSS externo complejo y JavaScript.</p>
                    
                    <h4 class="mt-4">Crear el archivo <code>resources/views/post/posts-pdf.blade.php</code></h4>
                    <p>Crea este nuevo archivo y pega el siguiente código. Usaremos estilos básicos para darle un aspecto profesional.</p>

                    <div class="code-block">
<pre><code>
&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;{{ $title }}&lt;/title&gt;
    &lt;style&gt;
        body { font-family: 'Helvetica', sans-serif; font-size: 12px; }
        .container { width: 100%; }
        .table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; }
        .table th { background-color: #f2f2f2; text-align: left; }
        .text-center { text-align: center; }
        .header { margin-bottom: 20px; }
        .header h1 { margin: 0; }
        .header p { margin: 0; color: #555; }
        footer { position: fixed; bottom: -30px; left: 0px; right: 0px; height: 50px; text-align: center; font-size: 10px; color: #777;}
        footer .page-number:before { content: "Página " counter(page); }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;footer&gt;
        &lt;span class="page-number"&gt;&lt;/span&gt;
    &lt;/footer&gt;

    &lt;div class="container"&gt;
        &lt;div class="header text-center"&gt;
            &lt;h1&gt;{{ $title }}&lt;/h1&gt;
            &lt;p&gt;Generado el: {{ $date }}&lt;/p&gt;
        &lt;/div&gt;

        &lt;table class="table"&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;ID&lt;/th&gt;
                    &lt;th&gt;Título&lt;/th&gt;
                    &lt;th&gt;Autor&lt;/th&gt;
                    &lt;th&gt;Categoría&lt;/th&gt;
                    &lt;th&gt;Estado&lt;/th&gt;
                    &lt;th&gt;Fecha de Creación&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                @forelse ($posts as $post)
                    &lt;tr&gt;
                        &lt;td&gt;{{ $post->id }}&lt;/td&gt;
                        &lt;td&gt;{{ $post->title }}&lt;/td&gt;
                        &lt;td&gt;{{ $post->user->name ?? 'No especificado' }}&lt;/td&gt;
                        &lt;td&gt;{{ $post->category->name ?? 'Sin categoría' }}&lt;/td&gt;
                        &lt;td&gt;{{ ucfirst($post->status) }}&lt;/td&gt;
                        &lt;td&gt;{{ $post->created_at->format('d/m/Y') }}&lt;/td&gt;
                    &lt;/tr&gt;
                @empty
                    &lt;tr&gt;
                        &lt;td colspan="6" class="text-center"&gt;No hay posts para mostrar.&lt;/td&gt;
                    &lt;/tr&gt;
                @endforelse
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Index View Section -->
        <div id="index-view" class="content-section">
            <div class="card">
                <div class="card-body p-5">
                    <h2 class="card-title text-primary mb-4">Paso 6: Modificando la Vista Principal</h2>
                    <p>El último paso es añadir un botón en la vista principal de la lista de posts (<code>index.blade.php</code>) para que el usuario pueda hacer clic y generar el reporte.</p>
                    
                    <h4 class="mt-4">Añadir el botón en <code>resources/views/post/index.blade.php</code></h4>
                    <p>Localiza la sección <code>content_header</code> y añade un nuevo botón junto al de "Crear Nuevo".</p>
                    <div class="code-block">
<pre><code>
@extends('adminlte::page')

@section('title', 'Posts')

@section('plugins.Datatables', true)

@section('content_header')
    &lt;div class="d-flex justify-content-between align-items-center"&gt;
        &lt;h1&gt;Listado de Posts&lt;/h1&gt;
        &lt;div&gt;
            &lt;!-- BOTÓN NUEVO PARA PDF --&gt;
            &lt;a href="{{ route('posts.pdf') }}" class="btn btn-danger" target="_blank"&gt;
                &lt;i class="fas fa-file-pdf"&gt;&lt;/i&gt; Generar Reporte PDF
            &lt;/a&gt;
            
            @can('posts.create')
            &lt;a href="{{ route('posts.create') }}" class="btn btn-success"&gt;
                &lt;i class="fas fa-plus"&gt;&lt;/i&gt; Crear Nuevo
            &lt;/a&gt;
            @endcan
        &lt;/div&gt;
    &lt;/div&gt;
@stop

{{-- ... El resto de tu vista (content, js, etc.) se mantiene igual ... --}}
</code></pre>
                        <button class="copy-btn"><i class="fas fa-copy"></i></button>
                    </div>
                </div>
            </div>
        </div>

         <!-- Conclusion Section -->
        <div id="conclusion" class="content-section">
            <div class="card">
                <div class="card-body p-5">
                    <h1 class="card-title text-primary"><i class="fas fa-check-circle"></i> ¡Implementación Completa!</h1>
                    <p class="lead">¡Felicidades! Has integrado exitosamente la generación de reportes PDF en tu aplicación Laravel.</p>
                    <p>Ahora, si vas a tu listado de posts, deberías ver el nuevo botón "Generar Reporte PDF". Al hacer clic, se abrirá una nueva pestaña con un PDF perfectamente formateado que muestra todos tus posts, incluyendo su autor y categoría.</p>
                    
                    <h4 class="mt-4">Resumen de lo que hicimos:</h4>
                    <ol>
                        <li>Instalamos <code>barryvdh/laravel-dompdf</code> con Composer.</li>
                        <li>Publicamos y revisamos el archivo de configuración <code>dompdf.php</code>.</li>
                        <li>Creamos una ruta dedicada para la generación del reporte.</li>
                        <li>Aseguramos la relación <code>user()</code> en el modelo <code>Post</code>.</li>
                        <li>Implementamos la lógica en <code>PostController</code> y exploramos funciones avanzadas como <code>setPaper</code>, <code>download</code> y <code>stream</code>.</li>
                        <li>Diseñamos una plantilla Blade específica para el PDF, ¡incluso con número de página!</li>
                        <li>Agregamos un botón en la interfaz de usuario para activar la generación del reporte.</li>
                    </ol>
                    <p>Puedes usar esta base para crear reportes mucho más complejos, con gráficos, imágenes dinámicas y diseños personalizados. ¡Las posibilidades son enormes!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.sidebar-nav .nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const sidebarToggler = document.getElementById('sidebar-toggler');

            function setActiveLink(targetId) {
                navLinks.forEach(l => l.classList.remove('active'));
                const newActiveLink = document.querySelector(`.sidebar-nav .nav-link[data-target="${targetId}"]`);
                if(newActiveLink) {
                    newActiveLink.classList.add('active');
                }

                contentSections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === targetId) {
                        section.classList.add('active');
                    }
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('data-target');
                    setActiveLink(targetId);
                });
            });

            document.querySelectorAll('.copy-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const code = this.previousElementSibling.textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        const originalHtml = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i> Copiado';
                        this.disabled = true;
                        setTimeout(() => {
                            this.innerHTML = originalHtml;
                            this.disabled = false;
                        }, 2000);
                    });
                });
            });

            sidebarToggler.addEventListener('click', function() {
                document.body.classList.toggle('sidebar-toggled');
            });

            // Set initial state
            setActiveLink('intro');
        });
    </script>
</body>
</html>